# --
# AgentITSMChangeSearch.dtl - provides HTML form for AgentITSMChangeSearch
# Copyright (C) 2003-2009 OTRS AG, http://otrs.com/
# --
# $Id: AgentITSMChangeSearch.dtl,v 1.10 2009-12-03 09:16:23 bes Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --

$Include{"AJAX"}

$Include{"AgentCustomerSearch"}
$Include{"AgentITSMUserSearch"}

<style type="text/css">
.myAutoComplete {
    width:          32em;    /* set width here or else widget will expand to fit its container */
    padding-bottom: 0.5em;
}
</style>

<script language="JavaScript" type="text/javascript">
<!--

// clear CABCustomer
function clear_field() {
    document.compose.CABCustomer.value = "";
    document.compose.CABCustomer.focus();
}

// clear CABAgent
function clear_field1() {
    document.compose.CABAgent.value = "";
    document.compose.CABAgent.focus();
}

//-->
</script>

<!-- dtl:block:Search -->
<table border="0" width="100%" cellspacing="0" cellpadding="3">
    <tr>
        <td class="mainhead">
            $Env{"Box0"}$Text{"Search: Change"}$Env{"Box1"}
        </td>
    </tr>
    <tr>
        <td align="center" class="mainbody">
            <br/>
            <form action="$Env{"CGIHandle"}" method="post" name="compose">
                <input type="hidden" name="Action" value="$Env{"Action"}"/>
                <input type="hidden" name="Subaction" value="Search"/>
<!-- ## HiddenFields for CABCustomer Autocompletion ## -->
                <input type="hidden" name="SelectedCustomerUser" value="$QData{"CustomerUser"}"/>
<!-- ## HiddenFields for CABAgent Autocompletion ## -->
                <input type="hidden" name="SelectedUser1"     value="$QData{"SelectedUser1"}">
                <input type="hidden" name="UserSearchGroups1" value="itsm-change">
                <table width="800px" border="0" cellspacing="0" cellpadding="3">
                    <colgroup>
                    <col width="50%">
                    <col width="50%">
                    </colgroup>
                    <tr>
                        <td colspan="2" class="contenthead">$Text{"Change#, Workorder and CAB"}</td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <table width="100%" border="0" cellspacing="0" cellpadding="3">
                                <colgroup>
                                <col width="50%">
                                <col width="50%">
                                </colgroup>
                                <tr>
                                    <td class="contentkey">$Text{"Change#"} $Text{"(e.g. 10*5155 or 105658*)"}</td>
                                    <td class="contentvalue"><input type="text" name="ChangeNumber" size="30" value="$QData{"ChangeNumber"}"/></td>
                                </tr>
                                <tr>
                                    <td class="contentkey">$Text{"Change Title"}</td>
                                    <td class="contentvalue"><input type="text" name="ChangeTitle" size="30" value="$QData{"ChangeTitle"}"/></td>
                                </tr>
                                <tr>
                                    <td class="contentkey">$Text{"Workorder Title"}</td>
                                    <td class="contentvalue"><input type="text" name="WorkOrderTitle" size="30" value="$QData{"WorkOrderTitle"}"/></td>
                                </tr>
                                <tr>
                                    <td class="contentkey">$Text{"CABCustomer"} $Text{"(e. g. US4231)"}</td>
                                    <td class="contentvalue">
<!-- dtl:block:CustomerSearchAutoCompleteDivStart-->
                                        <div id="myAutoComplete" class="myAutoComplete">
<!-- dtl:block:CustomerSearchAutoCompleteDivStart -->
                                            <input id="myAutoCompleteInput" type="text" name="CABCustomer" value="$QData{"CABCustomer"}" size="30"/>
<!-- dtl:block:CustomerSearchAutoCompleteDivEnd -->
                                            <div id="myAutoCompleteContainer"></div>
                                        </div>
<!-- dtl:block:CustomerSearchAutoCompleteDivEnd -->
<!-- dtl:block:CustomerSearchAutoCompleteFromInvalid -->
                                        <br/>
<!-- dtl:block:CustomerSearchAutoCompleteFromInvalid -->

                                        <font color="red" size="-2">$Text{"$Data{"Input invalid"}"}</font>
                                        <br/>
                                        $Data{"CABCustomerSelectionStrg"}
                                        <dtl if ($Data{"CABCustomerSelectionStrg"} ne "") { $Data{"TakeThisCustomer"} = "<br/><input class="button" type="submit" name="ExpandCustomerName2" value="$Text{"Take this Customer"}"/>"; }>
                                        $Data{"TakeThisCustomer"}
<!-- dtl:block:SearchCustomerButton -->
                                        <input class="button" type="submit" name="ExpandCustomerName1" value="$Text{"Search Customer"}"/>
                                        <input class="button" type="submit" name="ClearFrom" value="$Text{"Clear From"}" onclick="javascript:clear_field(); return false;"/>
<!-- dtl:block:SearchCustomerButton -->
                                    </td>
                                </tr>
                                <tr>
                                    <td class="contentkey">$Text{"CABAgent"} $Text{"(e. g. 234231)"}</td>
                                    <td class="contentvalue">
<!-- dtl:block:UserSearchAutoCompleteDivStart1 -->
                                        <div id="myAutoComplete1" class="myAutoComplete">
<!-- dtl:block:UserSearchAutoCompleteDivStart1 -->
                                            <input id="myAutoCompleteInput1" type="text" name="CABAgent" value="$QData{"CABAgent"}" size="30"/>
<!-- dtl:block:UserSearchAutoCompleteDivEnd1 -->
                                            <div id="myAutoCompleteContainer1"></div>
                                        </div>
<!-- dtl:block:UserSearchAutoCompleteDivEnd1 -->
<!-- dtl:block:InvalidCABAgent -->
                                        <br />
                                        <font color="red" size="-2">$Text{"Input invalid"}</font>
<!-- dtl:block:InvalidCABAgent -->
                                        <br/>
                                        $Data{"CABAgentString"}
<!-- dtl:block:TakeCABAgent -->
                                        <br/><input class="button" type="submit" name="ExpandManager2" value="$Text{"Take this User"}"/>
<!-- dtl:block:TakeCABAgent -->
<!-- dtl:block:SearchUserButton1 -->
                                        <input class="button" type="submit" name="ExpandCABAgent1" value="$Text{"Search User"}"/>
                                        <input class="button" type="submit" name="ClearCABAgent1" value="$Text{"Clear User"}" onclick="javascript:clear_field1(); return false;"/>
<!-- dtl:block:SearchUserButton1 -->
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contenthead">$Text{"Fulltext-Search in Change and Workorder (e. g. "Mar*in" or "Baue*")"}</td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <table width="100%" border="0" cellspacing="0" cellpadding="3">
                                <colgroup>
                                <col width="50%">
                                <col width="50%">
                                </colgroup>
                                <tr>
                                    <td class="contentkey">$Text{"Change description"}</td>
                                    <td class="contentvalue"><input type="text" name="Description" size="30" value="$QData{"Description"}"/></td>
                                </tr>
                                <tr>
                                    <td class="contentkey">$Text{"Change Justification"}</td>
                                    <td class="contentvalue"><input type="text" name="Justification" size="30" value="$QData{"Justification"}"/></td>
                                </tr>
                                <tr>
                                    <td class="contentkey">$Text{"Workorder Instruction"}</td>
                                    <td class="contentvalue"><input type="text" name="WorkOrderInstruction" size="30" value="$QData{"WorkOrderInstruction"}"/></td>
                                </tr>
                                <tr>
                                    <td class="contentkey">$Text{"Workorder Report"}</td>
                                    <td class="contentvalue"><input type="text" name="WorkOrderReport" size="30" value="$QData{"WorkOrderReport"}"/></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="contenthead">$Text{"Change Priority"}</td>
                        <td class="contenthead">$Text{"Change Impact"}</td>
                    </tr>
                    <tr>
                        <td class="contentbody">$Data{"ChangePrioritySelectionStrg"}</td>
                        <td class="contentbody">$Data{"ChangeImpactSelectionStrg"}</td>
                    </tr>
                    <tr>
                        <td class="contenthead">$Text{"Change Category"}</td>
                        <td class="contenthead">$Text{"Change State"}</td>
                    </tr>
                    <tr>
                        <td class="contentbody">$Data{"ChangeCategorySelectionStrg"}</td>
                        <td class="contentbody">$Data{"ChangeStateSelectionStrg"}</td>
                    </tr>
                    <tr>
                        <td class="contenthead">$Text{"Change Manager"}</td>
                        <td class="contenthead">$Text{"Change Builder"}</td>
                    </tr>
                    <tr>
                        <td class="contentbody">$Data{"ChangeManagerSelectionStrg"}</td>
                        <td class="contentbody">$Data{"ChangeBuilderSelectionStrg"}</td>
                    </tr>
                    <tr>
                        <td class="contenthead">$Text{"Created by Agent"}</td>
                        <td class="contenthead">&nbsp;</td>
                    </tr>
                    <tr>
                        <td class="contentbody">$Data{"CreateBySelectionStrg"}</td>
                        <td class="contentbody">&nbsp;</td>
                    </tr>
                    <tr>
                        <td class="contenthead">$Text{"Workorder State"}</td>
                        <td class="contenthead">$Text{"Workorder Agent"}</td>
                    </tr>
                    <tr>
                        <td class="contentbody">$Data{"WorkOrderStateSelectionStrg"}</td>
                        <td class="contentbody">$Data{"WorkOrderAgentIDSelectionStrg"}&nbsp;</td>
                    </tr>
<!-- dtl:block:RealizeTime -->
                    <tr>
                        <td colspan="2" class="contenthead">$Text{"RealizeTime"}</td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="RealizeTimeSearchType" value="" $Data{"RealizeTimeSearchType::None"}/>
                            $Text{"No realization time settings."}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="RealizeTimeSearchType" value="TimePoint" $Data{"RealizeTimeSearchType::TimePoint"}/>
                            $Text{"Realization time"} $Data{"RealizeTimePointStart"} $Data{"RealizeTimePoint"} $Data{"RealizeTimePointFormat"}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="RealizeTimeSearchType" value="TimeSlot" $Data{"RealizeTimeSearchType::TimeSlot"}/>
                            $Text{"Realization time between"} $Data{"RealizeTimeStart"} $Text{"and"} $Data{"RealizeTimeStop"}
                        </td>
                    </tr>
<!-- dtl:block:RealizeTime -->
<!-- dtl:block:PlannedStartTime -->
                    <tr>
                        <td colspan="2" class="contenthead">$Text{"Planned Start Time"}</td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="PlannedStartTimeSearchType" value="" $Data{"PlannedStartTimeSearchType::None"}/>
                            $Text{"No planned start time settings."}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="PlannedStartTimeSearchType" value="TimePoint" $Data{"PlannedStartTimeSearchType::TimePoint"}/>
                            $Text{"Planned start time"} $Data{"PlannedStartTimePointStart"} $Data{"PlannedStartTimePoint"} $Data{"PlannedStartTimePointFormat"}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="PlannedStartTimeSearchType" value="TimeSlot" $Data{"PlannedStartTimeSearchType::TimeSlot"}/>
                            $Text{"Planned start time between"} $Data{"PlannedStartTimeStart"} $Text{"and"} $Data{"PlannedStartTimeStop"}
                        </td>
                    </tr>
<!-- dtl:block:PlannedStartTime -->
<!-- dtl:block:PlannedEndTime -->
                    <tr>
                        <td colspan="2" class="contenthead">$Text{"Planned End Time"}</td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="PlannedEndTimeSearchType" value="" $Data{"PlannedEndTimeSearchType::None"}/>
                            $Text{"No planned end time settings."}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="PlannedEndTimeSearchType" value="TimePoint" $Data{"PlannedEndTimeSearchType::TimePoint"}/>
                            $Text{"Planned end time"} $Data{"PlannedEndTimePointStart"} $Data{"PlannedEndTimePoint"} $Data{"PlannedEndTimePointFormat"}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="PlannedEndTimeSearchType" value="TimeSlot" $Data{"PlannedEndTimeSearchType::TimeSlot"}/>
                            $Text{"Planned end time between"} $Data{"PlannedEndTimeStart"} $Text{"and"} $Data{"PlannedEndTimeStop"}
                        </td>
                    </tr>
<!-- dtl:block:PlannedEndTime -->
<!-- dtl:block:ActualStartTime -->
                    <tr>
                        <td colspan="2" class="contenthead">$Text{"Actual Start Time"}</td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="ActualStartTimeSearchType" value="" $Data{"ActualStartTimeSearchType::None"}/>
                            $Text{"No actual start time settings."}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="ActualStartTimeSearchType" value="TimePoint" $Data{"ActualStartTimeSearchType::TimePoint"}/>
                            $Text{"Actual start time"} $Data{"ActualStartTimePointStart"} $Data{"ActualStartTimePoint"} $Data{"ActualStartTimePointFormat"}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="ActualStartTimeSearchType" value="TimeSlot" $Data{"ActualStartTimeSearchType::TimeSlot"}/>
                            $Text{"Actual start time between"} $Data{"ActualStartTimeStart"} $Text{"and"} $Data{"ActualStartTimeStop"}
                        </td>
                    </tr>
<!-- dtl:block:ActualStartTime -->
<!-- dtl:block:ActualEndTime -->
                    <tr>
                        <td colspan="2" class="contenthead">$Text{"Actual End Time"}</td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="ActualEndTimeSearchType" value="" $Data{"ActualEndTimeSearchType::None"}/>
                            $Text{"No actual end time settings."}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="ActualEndTimeSearchType" value="TimePoint" $Data{"ActualEndTimeSearchType::TimePoint"}/>
                            $Text{"Actual end time"} $Data{"ActualEndTimePointStart"} $Data{"ActualEndTimePoint"} $Data{"ActualEndTimePointFormat"}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="ActualEndTimeSearchType" value="TimeSlot" $Data{"ActualEndTimeSearchType::TimeSlot"}/>
                            $Text{"Actual end time between"} $Data{"ActualEndTimeStart"} $Text{"and"} $Data{"ActualEndTimeStop"}
                        </td>
                    </tr>
<!-- dtl:block:ActualEndTime -->
<!-- dtl:block:CreateTime -->
                    <tr>
                        <td colspan="2" class="contenthead">$Text{"Create Time"}</td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="CreateTimeSearchType" value="" $Data{"CreateTimeSearchType::None"}/>
                            $Text{"No create time settings."}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="CreateTimeSearchType" value="TimePoint" $Data{"CreateTimeSearchType::TimePoint"}/>
                            $Text{"Change created"} $Data{"CreateTimePointStart"} $Data{"CreateTimePoint"} $Data{"CreateTimePointFormat"}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="CreateTimeSearchType" value="TimeSlot" $Data{"CreateTimeSearchType::TimeSlot"}/>
                            $Text{"Change created between"} $Data{"CreateTimeStart"} $Text{"and"} $Data{"CreateTimeStop"}
                        </td>
                    </tr>
<!-- dtl:block:CreateTime -->
<!-- dtl:block:ChangeTime -->
                    <tr>
                        <td colspan="2" class="contenthead">$Text{"Change Time"}</td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="ChangeTimeSearchType" value="" $Data{"ChangeTimeSearchType::None"}/>
                            $Text{"No change time settings."}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="ChangeTimeSearchType" value="TimePoint" $Data{"ChangeTimeSearchType::TimePoint"}/>
                            $Text{"Change changed"} $Data{"ChangeTimePointStart"} $Data{"ChangeTimePoint"} $Data{"ChangeTimePointFormat"}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="contentbody">
                            <input type="radio" name="ChangeTimeSearchType" value="TimeSlot" $Data{"ChangeTimeSearchType::TimeSlot"}/>
                            $Text{"Change changed between"} $Data{"ChangeTimeStart"} $Text{"and"} $Data{"ChangeTimeStop"}
                        </td>
                    </tr>
<!-- dtl:block:ChangeTime -->
                    <tr>
                        <td colspan="4" class="contentfooter">
                            <input class="button" accesskey="g" type="submit" value="$Text{"Search"}"/>
                        </td>
                    </tr>
                </table>
            </form>
            <br/>
        </td>
    </tr>
</table>
<!-- dtl:block:Search -->
