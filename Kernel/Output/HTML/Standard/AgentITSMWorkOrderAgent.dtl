# --
# AgentITSMWorkOrderAgent.dtl - provides HTML form for AgentITSMWorkOrderAgent
# Copyright (C) 2001-2010 OTRS AG, http://otrs.org/
# --
# $Id: AgentITSMWorkOrderAgent.dtl,v 1.26 2010-12-07 17:27:27 ub Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --

$Include{"AJAX"}

$Include{"AgentITSMUserSearch"}

<style type="text/css">
.myAutoComplete {
    width:32em; /* set width here or else widget will expand to fit its container */
    padding-bottom:0.5em;
}
</style>

<script language="JavaScript" type="text/javascript">
<!--
function clear_field() {
    document.compose.Agent.value = "";
    document.compose.Agent.focus();
}

// do initialization when the DOM is fully loaded
document.observe( "dom:loaded", function() {

    // clear the User input field, when it gains focus
    $('myAutoCompleteInput').observe(
        'focus',
        function() {
            this.setValue('');
        }
    );

} );


//-->
</script>

<table border="0" width="100%" cellspacing="0" cellpadding="3">
    <tr>
        <td class="mainhead">
            <div title="$Env{"Box0"} $Text{"Edit"} $Text{"WorkOrderAgent"} $Text{"of"} $Config{"ITSMWorkOrder::Hook"}: $QData{"ChangeNumber"}-$QData{"WorkOrderNumber"} $Env{"Box1"} $QData{"WorkOrderTitle"}">
                $Env{"Box0"} $Text{"Edit"} $Text{"WorkOrderAgent"} $Text{"of"} $Config{"ITSMWorkOrder::Hook"}: $QData{"ChangeNumber"}-$QData{"WorkOrderNumber"} $Env{"Box1"} $QData{"WorkOrderTitle","70"}
            </div>
        </td>
    </tr>
    <tr>
        <td class="menu">
            <a href="$Env{"Baselink"}$Env{"LastWorkOrderView"}" onmouseover="window.status='$JSText{"Back"}'; return true;" onmouseout="window.status='';" class="menuitem">$Text{"Back"}</a>
        </td>
    </tr>

    <tr>
        <td class="mainbody">
            <br>
            <form action="$Env{"CGIHandle"}" method="post" name="compose">
                <input type="hidden" name="Action"    value="$Env{"Action"}">
                <input type="hidden" name="Subaction" value="Save">
                <input type="hidden" name="WorkOrderID" value="$QData{"WorkOrderID"}">
                <input type="hidden" name="SelectedUser" value="$QData{"UserID"}">
                <input type="hidden" name="UserSearchGroups" value="itsm-change">
                <table border="0" width="800" align="center" cellspacing="0" cellpadding="4">
                    <tr>
                        <td class="contenthead">$Text{"WorkOrderAgent"}</td>
                    </tr>
                    <tr class="contentbody">
                        <td>
                            <table border="0" width="100%" cellspacing="0" cellpadding="3">
                                <colgroup>
                                    <col width="130">
                                    <col>
                                </colgroup>
                                <tr>
                                    <td class="contentkey">
                                        $Text{"WorkOrderAgent"}:
                                    </td>
                                    <td class="contentvalue">
<!-- dtl:block:UserSearchAutoCompleteDivStart -->
                                        <div id="myAutoComplete" class="myAutoComplete">
<!-- dtl:block:UserSearchAutoCompleteDivStart -->
                                            <input id="myAutoCompleteInput" type="text" name="User" value="$QData{"User"}" size="70"/>
<!-- dtl:block:UserSearchAutoCompleteDivEnd -->
                                            <div id="myAutoCompleteContainer"></div>
                                        </div>
<!-- dtl:block:UserSearchAutoCompleteDivEnd -->
<!-- dtl:block:InvalidUser -->
                                        <br />
                                        <font color="red" size="-2">$Text{"Input invalid"}</font>
<!-- dtl:block:InvalidUser -->
                                        <br/>
                                        $Data{"UserStrg"}
<!-- dtl:block:TakeUser -->
                                        <br/><input class="button" type="submit" name="ExpandUserName2" value="$Text{"Take this User"}"/>
<!-- dtl:block:TakeUser -->
<!-- dtl:block:SearchUserButton -->
                                        <input class="button" type="submit" name="ExpandUserName1" value="$Text{"Search User"}"/>
                                        <input class="button" type="submit" name="ClearUser" value="$Text{"Clear"} $Text{"User"}" onclick="clear_field(); return false;"/>
<!-- dtl:block:SearchUserButton -->
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="contentfooter">
                            <input class="button" type="submit" name="Submit" value="$Text{"Save"}">
                        </td>
                    </tr>
                </table>
            </form>
            <br>
        </td>
    </tr>
</table>
