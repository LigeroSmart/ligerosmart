# --
# AgentITSMChangeConditionEdit.dtl - provides HTML form for AgentITSMChangeConditionEdit
# Copyright (C) 2001-2010 OTRS AG, http://otrs.org/
# --
# $Id: AgentITSMChangeConditionEdit.dtl,v 1.24 2010-10-13 13:40:25 ub Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --

$Include{"AJAX"}

<script language="JavaScript" type="text/javascript">
<!--

function submit_compose() {

    // check the condition name, all whitespace counts as empty
    if (document.compose.Name.value.match(/^\s*$/)) {
        alert('$JSText{"A condition must have a name!"}');
        document.compose.Name.focus();

        return false;
    }

    return true;
}
//-->
</script>

<table border="0" width="100%" cellspacing="0" cellpadding="3">
    <tr>
        <td class="mainhead">
            <div title="$Env{"Box0"} $Text{"Edit"} $Text{"Condition"}: $Config{"ITSMChange::Hook"}: $QData{"ChangeNumber"} $Env{"Box1"} $QData{"ChangeTitle"}">
                $Env{"Box0"} $Text{"Edit"} $Text{"Condition"}: $Config{"ITSMChange::Hook"}: $QData{"ChangeNumber"} $Env{"Box1"} $QData{"ChangeTitle","70"}
            </div>
        </td>
    </tr>
    <tr>
        <td class="menu">
            <a href="$Env{"Baselink"}Action=AgentITSMChangeCondition;&ChangeID=$LQData{"ChangeID"}" onmouseover="window.status='$JSText{"Back"}'; return true;" onmouseout="window.status='';" class="menuitem">$Text{"Back"}</a>
        </td>
    </tr>
    <tr>
        <td class="mainbody" align="center">
            <form action="$Env{"CGIHandle"}" method="post" enctype="multipart/form-data" name="compose">
                <input type="hidden" name="Action" value="$Env{"Action"}"/>
                <input type="hidden" name="Subaction" value="Save"/>
                <input type="hidden" name="ChangeID" value="$QData{"ChangeID"}"/>
                <input type="hidden" name="ConditionID" value="$QData{"ConditionID"}"/>
                <input class="button" type="submit" style="display:none" value="$Text{"Save"}" name="Save" onclick="return submit_compose();">
                <br/>
                <table border="0" width="800" cellspacing="0" cellpadding="4">
                    <tr class="contenthead">
                        <td class="contentkey">$Text{"Condition"}</td>
                    </tr>
                    <tr class="contentbody">
                        <td>
                            <table width="100%" border="0" cellpadding="5" cellspacing="0">
                                <tr>
                                    <td>
                                        <table width="100%" border="0" cellpadding="3" cellspacing="0">
                                            <colgroup>
                                                <col width="20%">
                                                <col width="80%">
                                            </colgroup>
                                            <tr>
                                                <td class="contentkey">
                                                    $Text{"Name"}:
                                                    <font color="red" title="$Text{"Required"}">*</font>
                                                </td>
                                                <td class="contentvalue">
                                                    <input type="text" id="Name" name="Name" value="$QData{"Name"}" size="70" maxlength="250">
<!-- dtl:block:InvalidName-->
                                                    <br/>
                                                    <font color="red" size="-2">$Text{"Input invalid"}</font>
<!-- dtl:block:InvalidName -->
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="contentkey">$Text{"Matching"}: </td>
                                                <td class="contentvalue">
                                                    <input name="ExpressionConjunction" type="radio" value="any" $Data{"anyselected"}/> $Text{"Any expression (OR)"}
                                                    <input name="ExpressionConjunction" type="radio" value="all" $Data{"allselected"}/> $Text{"All expressions (AND)"}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="contentkey">$Text{"Valid"}: </td>
                                                <td class="contentvalue">$Data{"ValidOptionString"}</td>
                                            </tr>
                                            <tr>
                                                <td class="contentkey">$Text{"Comment"}: </td>
                                                <td class="contentvalue">
                                                    <input type="text" name="Comment" value="$QData{"Comment"}" size="70" maxlength="250">
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr class="contenthead">
                        <td class="contentkey">$Text{"Expressions"}</td>
                    </tr>
                    <tr class="contentbody">
                        <td>
                            <table width="100%" border="0" cellpadding="3" cellspacing="0">
<!-- dtl:block:ExpressionOverviewRow -->
                                <tr class="contentbody">
<!-- dtl:block:ExpressionOverviewRowElementObject -->
                                    <td align="left" width="10%" class="contentvalue">$Data{"ObjectOptionString"}</td>
<!-- dtl:block:ExpressionOverviewRowElementObject -->
<!-- dtl:block:ExpressionOverviewRowElementSelector -->
                                    <td align="left" width="10%" class="contentvalue">$Data{"SelectorOptionString"}</td>
<!-- dtl:block:ExpressionOverviewRowElementSelector -->
<!-- dtl:block:ExpressionOverviewRowElementAttribute -->
                                    <td align="left" width="10%" class="contentvalue">$Data{"AttributeOptionString"}</td>
<!-- dtl:block:ExpressionOverviewRowElementAttribute -->
<!-- dtl:block:ExpressionOverviewRowElementOperator -->
                                    <td align="left" width="10%" class="contentvalue">$Data{"OperatorOptionString"}</td>
<!-- dtl:block:ExpressionOverviewRowElementOperator -->
                                    <td align="left" width="10%" class="contentvalue">
                                        <div id="ExpressionID::$QData{"ExpressionID"}::CompareValue::Div">
<!-- dtl:block:ExpressionOverviewRowElementCompareValueText -->
                                            <input type="text" id="ExpressionID::$QData{"ExpressionID"}::CompareValue" name="ExpressionID::$QData{"ExpressionID"}::CompareValue" value="$QData{"CompareValue"}" size="30" maxlength="250">
<!-- dtl:block:ExpressionOverviewRowElementCompareValueText -->
<!-- dtl:block:ExpressionOverviewRowElementCompareValueSelection -->
                                            $Data{"ValueOptionString"}
<!-- dtl:block:ExpressionOverviewRowElementCompareValueSelection -->
                                        </div>
                                    </td>
                                    <td width="100%" align="right">
                                        <input class="button" type="submit" value="$Text{"Delete"}" name="DeleteExpressionID::$QData{"ExpressionID"}" onclick="return submit_compose();">
                                    </td>
                                    <td align="left" width="10%" class="contentvalue">
                                        &nbsp;
                                    </td>
                                </tr>
<!-- dtl:block:ExpressionOverviewRow -->
<!-- empty row, for having a valid HTML table in the absence of expressions -->
                                <tr><td colspan="9"></td></tr>
                            </table>
                        </td>
                    </tr>
                    <tr class="contentbody">
                        <td align="right">
                            $Text{"Add new expression"}.&nbsp;&nbsp;
                            <input class="button" type="submit" value="$Text{"Add"}" name="AddExpression" onclick="return submit_compose();">
                        </td>
                    </tr>
                    <tr class="contenthead">
                        <td class="contentkey">$Text{"Actions"}</td>
                    </tr>
                    <tr class="contentbody">
                        <td>
                            <table width="100%" border="0" cellpadding="3" cellspacing="0">
<!-- dtl:block:ActionOverviewRow -->
                                <tr class="contentbody">
<!-- dtl:block:ActionOverviewRowElementObject -->
                                    <td align="left" width="10%" class="contentvalue">$Data{"ObjectOptionString"}</td>
<!-- dtl:block:ActionOverviewRowElementObject -->
<!-- dtl:block:ActionOverviewRowElementSelector -->
                                    <td align="left" width="10%" class="contentvalue">$Data{"SelectorOptionString"}</td>
<!-- dtl:block:ActionOverviewRowElementSelector -->
<!-- dtl:block:ActionOverviewRowElementAttribute -->
                                    <td align="left" width="10%" class="contentvalue">$Data{"AttributeOptionString"}</td>
<!-- dtl:block:ActionOverviewRowElementAttribute -->
<!-- dtl:block:ActionOverviewRowElementOperator -->
                                    <td align="left" width="10%" class="contentvalue">$Data{"OperatorOptionString"}</td>
<!-- dtl:block:ActionOverviewRowElementOperator -->
                                    <td align="left" width="10%" class="contentvalue">
                                        <div id="ActionID::$QData{"ActionID"}::ActionValue::Div">
<!-- dtl:block:ActionOverviewRowElementActionValueText -->
                                            <input type="text" id="ActionID::$QData{"ActionID"}::ActionValue" name="ActionID::$QData{"ActionID"}::ActionValue" value="$QData{"ActionValue"}" size="30" maxlength="250">
<!-- dtl:block:ActionOverviewRowElementActionValueText -->
<!-- dtl:block:ActionOverviewRowElementActionValueSelection -->
                                            $Data{"ValueOptionString"}
<!-- dtl:block:ActionOverviewRowElementActionValueSelection -->
                                        </div>
                                    </td>
                                    <td width="100%" align="right">
                                        <input class="button" type="submit" value="$Text{"Delete"}" name="DeleteActionID::$QData{"ActionID"}" onclick="return submit_compose();">
                                    </td>
                                    <td align="left" width="10%" class="contentvalue">
                                        &nbsp;
                                    </td>
                                </tr>
<!-- dtl:block:ActionOverviewRow -->
<!-- empty row, for having a valid HTML table in the absence of actions -->
                                <tr><td colspan="7"></td></tr>
                            </table>
                        </td>
                    </tr>
                    <tr class="contentbody">
                        <td align="right">
                            $Text{"Add new action"}.&nbsp;&nbsp;
                            <input class="button" type="submit" value="$Text{"Add"}" name="AddAction" onclick="return submit_compose();">
                        </td>
                    </tr>
                    <tr class="contentfooter">
                        <td align="right">
                            <input class="button" type="submit" value="$Text{"Save"}" name="Save" onclick="return submit_compose();">
                        </td>
                    </tr>
                </table>
                <br/>
            </form>
        </td>
    </tr>
</table>
